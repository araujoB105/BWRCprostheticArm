define("modules/clean/crypto",["require","exports","external/sjcl"],function(e,t,n){"use strict";function i(e){for(var t=n.random.randomWords(e.length),i=0,r=e.length,o=0<=r;o?i<r:i>r;o?i++:i--)e[i]=t[i];return e}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomValues=i}),define("modules/clean/file_store/actions",["require","exports"],function(e,t){"use strict";function n(e,t){return{type:i.PutFile,payload:{file:t,fileId:e}}}Object.defineProperty(t,"__esModule",{value:!0});var i;(function(e){e.PutFile="PUT_FILE"})(i=t.FileNamespaceActions||(t.FileNamespaceActions={})),t.putFile=n}),define("modules/clean/file_store/reducer",["require","exports","tslib","modules/clean/file_store/actions"],function(e,t,n,i){"use strict";function r(e,r){switch(void 0===e&&(e=t.defaultFileState),r.type){case i.FileNamespaceActions.PutFile:return n.__assign({},e,(o={},o[r.payload.fileId]=r.payload.file,o))}return e;var o}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileState={},t.fileNamespaceReducer=r}),define("modules/clean/file_store/selectors",["require","exports","modules/clean/file_store/reducer","modules/clean/redux/types","modules/clean/redux/selectors"],function(e,t,n,i,r){"use strict";function o(e){return r.getStateAtNamespace(e,i.FILE_NAMESPACE_KEY)||n.defaultFileState}function a(e,t){return t?o(e)[t]:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=a}),define("modules/clean/file_store/utils",["require","exports","modules/clean/filepath"],function(e,t,n){"use strict";function i(e,t){return e.ns_id===t.ns_id&&e.sjid===t.sjid}function r(e){return"fq_path"in e}function o(e){return"subpath"in e}function a(e){return e.ns_id+":"+e.sjid}function s(e){var t=r(e)?e.fq_path:e.filename;return n.file_extension(t)}function l(e){var t=r(e)?e.fq_path:e.filename;return n.filename(t)}function c(e){var t=l(e);return n.filename_without_extension(t)}function u(e){return 0===e.bytes}function d(e){return e.is_symlink&&u(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.areFilesEqual=i,t.isBrowseFile=r,t.isArchiveFile=o,t.getFileRevisionId=a,t.getExtension=s,t.getFilename=l,t.getFilenameWithoutExtension=c,t.isEmptyFile=u,t.isSymLink=d}),define("modules/clean/open_in_app/actions",["require","exports","modules/clean/open_in_app/types","modules/clean/open_in_mobile_app"],function(e,t,n,i){"use strict";function r(){var e=navigator.userAgent||"",t=e.match(/OS (\d+)_(\d+)_?(\d+)?/);return!t||parseInt(t[1],10)>=9}function o(e,t){var o=t.onAppNeeded,a=t.onAppInstalled;n.areUrlsIOS(e)?i.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,r(),o,a):n.areUrlsAndroid(e)&&i.open_android_intent(e.androidAppUrl)}function a(e){var t;if(n.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!n.areUrlsAndroid(e))return;t=e.androidAppUrl}var i=document.createElement("iframe");i.setAttribute("class","open-in-app-transport"),i.setAttribute("src",t),i.setAttribute("style","display: none"),document.body.appendChild(i)}function s(){i.cleanup()}Object.defineProperty(t,"__esModule",{value:!0}),t.openInApp=o,t.openImmediately=a,t.cleanUp=s}),define("modules/clean/open_in_app/types",["require","exports","modules/constants/file_viewer"],function(e,t,n){"use strict";function i(e){return e.platform===o.IPAD||e.platform===o.IPHONE}function r(e){return e.platform===o.ANDROID_MARKET}Object.defineProperty(t,"__esModule",{value:!0});var o=n.OpenInMobileAppPlatform;t.areUrlsIOS=i,t.areUrlsAndroid=r}),define("modules/clean/open_in_mobile_app",["require","exports","jquery","modules/clean/analytics","modules/core/exception","modules/core/i18n"],function(e,t,n,i,r,o){"use strict";var a=(function(){function e(){}return e.initClass=function(){var e=this;this.vischange_listener=null,this.open_app_mode=!0,this.try_open_ios_9=function(t,n,i,r){return void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),e.vischange_listener||(e.vischange_listener=function(t){return e.open_app_mode=!0,r()},document.addEventListener("visibilitychange",e.vischange_listener)),e.open_app_mode?(e.open_app_mode=!1,e._onOpenLoggingHandler(),i(),window.location=t):(e._onInstallLoggingHandler(),window.location=n)},this.fallback_will_launch=!1,this.try_open=function(t,r,o){if(e._onOpenLoggingHandler(),!e.fallback_will_launch){var a=n("body"),s=function(){var e=n("<iframe />",{src:t,style:"display: none;"});return a.append(e)},l=!1,c=function(e){return l=!0};document.addEventListener("visibilitychange",c);var u=!1,d=function(e){return u=!0};window.addEventListener("pagehide",d),null!=o&&i.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN","WEB_MOBILE",{scl_url:o}),s();var p=Date.now(),_=function(){if(e.fallback_will_launch=!1,document.removeEventListener("visibilitychange",c),window.removeEventListener("pagehide",d),!u&&!l&&Date.now()<p+4700)return null!=o&&i.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL","WEB_MOBILE",{scl_url:o}),window.location.replace(r)};return setTimeout(_,3200),e.fallback_will_launch=!0}}},e._onOpenLoggingHandler=function(){},e._onInstallLoggingHandler=function(){},e.registerLoggingHandlers=function(e,t){return this._onOpenLoggingHandler=e,this._onInstallLoggingHandler=t},e.open_on_click=function(e,t,i,r,a,s,l){var c=this;void 0===s&&(s=null);var u=function(i){if(i.preventDefault(),l)return c.open_android_intent(l);if(a){r||(r=n("<div/>"));var u=r.text();return c.try_open_ios_9(e,t,function(){return r.text(o._("Install app?"))},function(){return r.text(u)})}return c.try_open(e,t,s)};return n(i).on("click",u)},e.open_ios=function(e,t,n,i,r){return void 0===i&&(i=function(){}),void 0===r&&(r=function(){}),n?this.try_open_ios_9(e,t,i,r):this.try_open(e,t)},e.open_android_intent=function(e){return r.assert(e&&e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),this._onOpenLoggingHandler&&this._onOpenLoggingHandler(),window.location.href=e},e.redirect_on_load=function(e,t){return this.try_open(e,t)},e.cleanup=function(){if(this.vischange_listener)return document.removeEventListener("visibilitychange",this.vischange_listener)},e})();return a.initClass(),a}),define("modules/clean/photos/batching_thumb_store",["require","exports","modules/clean/photos/thumb_loading/batching_thumb_loader","modules/clean/photos/thumb_loading/generic_thumb_store","modules/constants/request"],function(e,t,n,i,r){"use strict";return function(e){var t=!(!e||!e.allow_http2)&&e.allow_http2,o=r.IS_HTTP2&&t,a=o?void 0:new n.BatchingThumbLoader;return new i.GenericThumbStore(a,!o)}}),define("modules/clean/photos/thumb_loading/batching_thumb_loader",["require","exports","modules/clean/photos/batch_thumb_loader","modules/clean/photos/thumb_loading/utils"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(){function e(){this.batch_thumb_loader=new n.BatchThumbLoader({})}return e.prototype.get_request_id=function(){return this.batch_thumb_loader.vend_request_id()},e.prototype.load_image=function(e,t,n,i,r,o){this.batch_thumb_loader.queue_thumb(e,this._thumb_loaded.bind(this,{url:e,request_id:t,success:i,error:r,should_retry:o}),{onrequest:n,request_id:t}),window.setTimeout(this.batch_thumb_loader.flush.bind(this.batch_thumb_loader,10))},e.prototype._thumb_loaded=function(e,t){var n=e.url,r=(e.request_id,e.success),o=e.error,a=e.should_retry;t&&0===t.indexOf("data:")?r(t):i.load_individual_image(n,0,r,o,a)},e.prototype.cancel_thumb=function(e){this.batch_thumb_loader.cancel_thumb(e)},e})();t.BatchingThumbLoader=r}),define("modules/clean/previews/path_context_utils",["require","exports","modules/clean/previews/constants","modules/core/browser"],function(e,t,n,i){"use strict";function r(){var e=i.get_uri().path;return/^\/(home|work|personal|search)/.test(e)?n.PathContext.Browse:/^\/(s|scl\/fi)\//.test(e)?n.PathContext.SharedLinkFile:/^\/(sh|scl\/fo)\//.test(e)?n.PathContext.SharedLinkFolder:/^\/sc\//.test(e)?n.PathContext.SharedLinkCollection:/^\/history/.test(e)?n.PathContext.VersionHistory:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.determinePathContext=r}),define("modules/clean/previews/responsive_utils",["require","exports","modules/clean/previews/constants","modules/clean/previews/path_context_utils"],function(e,t,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponsiveEnabled=function(){var e=i.determinePathContext();return e!==n.PathContext.VersionHistory&&e!==n.PathContext.SharedLinkCollection}}),define("modules/clean/react/file_viewer/actions",["require","exports","modules/clean/downloads","modules/clean/flux/dispatcher","modules/clean/react/file_viewer/constants","modules/core/browser","modules/core/uri","modules/clean/react/file_viewer/data/legacy_flux_integration"],function(e,t,n,i,r,o,a,s){"use strict";function l(e,t,n,o){void 0===o&&(o={}),i.Dispatcher.dispatch({type:r.ActionType.Setup,data:{files:e,currentIndex:t,user:n,sharedLinkInfos:o.sharedLinkInfos,shareTokens:o.shareTokens,sharePermissions:o.sharePermissions,disableFlipping:o.disableFlipping}})}function c(){i.Dispatcher.dispatch({type:r.ActionType.Cleanup})}function u(e){i.Dispatcher.dispatch({type:r.ActionType.UpdateFiles,data:{files:e}})}function d(){i.Dispatcher.dispatch({type:r.ActionType.FlipNext})}function p(){i.Dispatcher.dispatch({type:r.ActionType.FlipPrevious})}function _(){i.Dispatcher.dispatch({type:r.ActionType.OpenFullscreen})}function f(){i.Dispatcher.dispatch({type:r.ActionType.CloseFullscreen})}function m(e){i.Dispatcher.dispatch({type:r.ActionType.SwitchRevision,data:{file:e}}),s.switchRevision(e)}function h(){i.Dispatcher.dispatch({type:r.ActionType.RestoreRevision})}function v(e){i.Dispatcher.dispatch({type:r.ActionType.FastForwardRevision,data:{file:e}})}function w(e){var t=a.URI.parse(e.href);t.updateQuery({dl:"1"}),n.get({url:t.toString(),__do_not_use_expected_domain:"dl.dropboxusercontent.com"})}function E(){o.reload(!0)}function S(e){i.Dispatcher.dispatch({type:r.ActionType.BroadcastRenderStatus,data:{newStatus:e}})}function g(){i.Dispatcher.dispatch({type:r.ActionType.HideOpenInAppBanner})}function b(){i.Dispatcher.dispatch({type:r.ActionType.ClosePreviewQualityPopup})}Object.defineProperty(t,"__esModule",{value:!0}),t.setup=l,t.cleanup=c,t.updateFiles=u,t.flipNext=d,t.flipPrevious=p,t.openFullscreen=_,t.closeFullscreen=f,t.switchRevision=m,t.restoreRevision=h,t.fastForwardRevision=v,t.download=w,t.pendingFileUploaded=E,t.broadcastPreviewRenderStatus=S,t.hideOpenInAppBanner=g,t.closePreviewQualityPopup=b}),define("modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","external/classnames","external/react","modules/constants/file_viewer","modules/core/browser","spectrum/button","spectrum/file_icon","spectrum/icon_content","spectrum/icon_form","modules/clean/open_in_app/types","modules/clean/static_urls","modules/core/i18n","modules/clean/react/css"],function(e,t,n,i,r,o,a,s,l,c,u,d,p,_){"use strict";function f(e){var t=e.onClose;return i.createElement("header",null,i.createElement("h1",{className:"DropboxLogo"},i.createElement("img",{src:d.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),i.createElement("img",{src:d.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),i.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:t},i.createElement(c.IconForm,{name:"cancel"})))}function m(e){var t=e.appUrl,n=e.onContinue,r=e.onAppDownload;return i.createElement("div",{className:"app-download-interstitial-ctas"},i.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",href:t,onClick:r},p._("Get the app")),i.createElement(a.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:n},p._("Or continue to website")))}function h(e,t){return e&&t?p._("%(owner)s (%(team)s) shared this with you.").format({owner:e,team:t}):e&&!t?p._("%(owner)s shared this with you.").format({owner:e}):!e&&t?p._("%(team)s shared this with you.").format({team:t}):p._("This file was shared with you.")}function v(e){var t=e.fileOrFolderName,n=e.isFolder,r=e.ownerName,o=e.ownerTeamName;return i.createElement("section",{className:"app-download-interstitial-content"},i.createElement("header",null,i.createElement("h2",null,p._("Get a better view with our mobile app"))),i.createElement("div",{className:"app-download-interstitial-content-thumbnail"},n?i.createElement(l.IconContent,{name:"folder_shared-large",alt:t}):i.createElement(s.FileIcon,{path:t,variant:"large"}),i.createElement("p",{className:"app-download-interstitial-filename"},t),i.createElement("p",{className:"app-download-interstitial-owner"},h(r,o))))}function w(e){if(e){if(u.areUrlsIOS(e))return e.iOSAppStoreUrl;if(u.areUrlsAndroid(e))return e.androidAppUrl}}function E(e){var t=e.className,r=e.open_in_app_data,o=e.fileOrFolderName,a=e.isFolder,s=e.onClose,l=e.onContinue,c=e.onAppDownload,u=e.ownerName,d=e.ownerTeamName;return i.createElement("section",{className:n("app-download-interstitial-container",t)},i.createElement(f,{onClose:s}),i.createElement(v,{isFolder:a,fileOrFolderName:o,ownerName:u,ownerTeamName:d}),i.createElement(m,{onContinue:l,onAppDownload:c,appUrl:w(r)}))}function S(){return!r.RESPONSIVE_SHARED_LINKS_SKIP_INTERSTITIAL&&o.is_mobile_or_tablet()&&!o.is_ios_webview()&&!o.is_facebook_browser()}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowInterstitial=S;var g=_(E,["/static/css/index/obsidian/logo-vflM1D8V1.css","/static/css/file_viewer/app_download_interstitial-vfllUPOgM.css"]);t.AppDownloadInterstitial=g}),define("modules/clean/react/file_viewer/constants",["require","exports","modules/clean/react/size_class/constants","modules/core/i18n","modules/clean/previews/constants"],function(e,t,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.Setup="SETUP",e.Cleanup="CLEANUP",e.UpdateFiles="UPDATE_FILES",e.FlipNext="FLIP_NEXT",e.FlipPrevious="FLIP_PREVIOUS",e.OpenFullscreen="OPEN_FULLSCREEN",e.CloseFullscreen="CLOSE_FULLSCREEN",e.SwitchRevision="SWITCH_REVISION",e.RestoreRevision="RESTORE_REVISION",e.FastForwardRevision="FAST_FORWARD_REVISION",e.BroadcastRenderStatus="BROADCAST_RENDER_STATUS",e.HideOpenInAppBanner="HIDE_OPEN_IN_APP_BANNER",e.ClosePreviewQualityPopup="CLOSE_PREVIEW_QUALITY_POPUP"})(t.ActionType||(t.ActionType={}));(function(e){e[e.Unknown=0]="Unknown",e[e.Succeeded=1]="Succeeded"})(t.PreviewRenderStatus||(t.PreviewRenderStatus={}));(function(e){e.FileViewerOpened="FILE_VIEWER_OPENED",e.FilePreviewSessionEnded="FILE_PREVIEW_SESSION_ENDED",e.FilePreviewAttemptStarted="FILE_PREVIEW_ATTEMPT_STARTED",e.FilePreviewSupportConfirmed="FILE_PREVIEW_SUPPORT_CONFIRMED",e.FilePreviewSupportDenied="FILE_PREVIEW_SUPPORT_DENIED",e.FilePreviewDownloadAttempted="FILE_PREVIEW_DOWNLOAD_ATTEMPTED",e.FilePreviewDownloadSucceeded="FILE_PREVIEW_DOWNLOAD_SUCCEEDED",e.FilePreviewDownloadFailed="FILE_PREVIEW_DOWNLOAD_FAILED",e.FilePreviewRenderSucceeded="FILE_PREVIEW_RENDER_SUCCEEDED",e.FilePreviewRenderFailed="FILE_PREVIEW_RENDER_FAILED",e.FilePreviewPASSShown="FILE_PREVIEW_PASS_SHOWN",e.FilePreviewPASSHover="FILE_PREVIEW_PASS_HOVER",e.FilePreviewPASSClick="FILE_PREVIEW_PASS_CLICK",e.BrowsePASSShown="BROWSE_PASS_SHOWN",e.BrowsePASSHover="BROWSE_PASS_HOVER",e.BrowsePASSClick="BROWSE_PASS_CLICK",e.FilePreviewQualityPopupAsked="FILE_PREVIEW_QUALITY_POPUP_ASKED",e.FilePreviewQualityPopupAnswered="FILE_PREVIEW_QUALITY_POPUP_ANSWERED",e.FilePreviewQualityPopupDismissed="FILE_PREVIEW_QUALITY_POPUP_DISMISSED",e.FilePreviewUserAction="FILE_PREVIEW_USER_ACTION",e.FilePreviewVideoStalled="FILE_PREVIEW_VIDEO_STALLED",e.FilePreviewVideoToggled="FILE_PREVIEW_VIDEO_TOGGLED",e.FilePreviewVideoTruncated="FILE_PREVIEW_VIDEO_TRUNCATED",e.ArchivePreviewContentsScanned="ARCHIVE_PREVIEW_CONTENTS_SCANNED"})(t.EventType||(t.EventType={}));(function(e){e.ExcelHTML="test-workbook.html"})(t.CannedTestFilename||(t.CannedTestFilename={}));(function(e){e[e.Frame=0]="Frame",e[e.Window=1]="Window"})(t.FileViewerInterfaceType||(t.FileViewerInterfaceType={}));(function(e){e[e.TitleBar=0]="TitleBar",e[e.PreviewContent=1]="PreviewContent",e[e.Sidebar=2]="Sidebar"})(t.FileViewerPane||(t.FileViewerPane={}));(function(e){e.AppDownloadInterstitialClose="app_download_interstitial_close",e.AppDownloadInterstitialContinue="app_download_interstitial_continue",e.AppDownloadInterstitialInstall="app_download_interstitial_install",e.AppDownloadInterstitialView="app_download_interstitial_view",e.ArchiveNavigation="archive_navigation",e.Share="share",e.Download="download",e.SaveToDropbox="save_to_dropbox",e.SaveToDropboxPersonal="save_to_dropbox_personal",e.SaveToDropboxWork="save_to_dropbox_work",e.OpenInApp="open_in_app",e.OpenInOfficeOnline="open_in_office_online",e.OpenInUnity="open_in_unity",e.OpenInUnityFolder="open_in_unity_folder",e.RemoveLink="remove_link",e.ViewRevisions="view_revisions",e.ClickDropboxLogo="click_dropbox_logo",e.ClickCustomLogo="click_custom_logo",e.ToggleCommentsOn="toggle_comments_on",e.ToggleCommentsOff="toggle_comments_off",e.SignIn="sign_in",e.ClickNotifications="click_notifications",e.ClickAccountMenu="click_account_menu",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.Print="print",e.InlineSearch="inline_search",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.VideoPlaybackRateChanged="playback_rate_changed"})(t.UserAction||(t.UserAction={}));(function(e){e.AppDownloadInterstitial="app_download_interstitial",e.TitleBarMain="title_bar_main",e.TitleBarSplitButton="title_bar_open_split_button",e.TitleBarMore="title_bar_more",e.PreviewContentMain="preview_content_main",e.PreviewContentSplitButton="preview_content_open_split_button",e.Toolbar="toolbar",e.VideoPlayer="video_player",e.OpenInAppBanner="open_in_app_banner",e.LightboxFrame="lightbox_frame",e.LightboxToolbar="lightbox_toolbar",e.LightboxCloseButton="lightbox_close_button",e.Sidebar="sidebar",e.Keyboard="keyboard",e.Browser="browser",e.Unknown="unknown"})(t.UserActionContext||(t.UserActionContext={}));(function(e){e[e.Main=0]="Main",e[e.Split=1]="Split"})(t.SplitButtonActionLocation||(t.SplitButtonActionLocation={}));t.SizeClassFilenameLengthMap=(o={},o[n.SizeClass.Small]=12,o[n.SizeClass.Medium]=25,o[n.SizeClass.Large]=35,o),t.ResponsiveClassName="responsive-enabled",t.PathContext=r.PathContext,t.SubpathQueryKey="file_subpath",t.UnsupportedExtensionHelpLink="https://www.dropbox.com/help/files-folders/file-types-that-preview",t.NoExtensionErrorMessage=i._("Files without an extension canâ€™t be previewed");(function(e){e.default="default",e.html="html",e.pdf="pdf",e.ppt="ppt",e.spreadsheet="spreadsheet"})(t.DocType||(t.DocType={}));var o}),define("modules/clean/react/file_viewer/data/actions",["require","exports","modules/clean/react/file_viewer/constants","modules/clean/file_store/actions","modules/clean/file_store/utils","modules/clean/react/file_viewer/logging"],function(e,t,n,i,r,o){"use strict";function a(e){return{type:e?t.Actions.OpenFullScreen:t.Actions.CloseFullScreen}}function s(e){return function(i,r){void 0===i&&(i=n.DocType.default),e({type:t.Actions.OpenSidebar,payload:{type:i}}),o.logUserAction(n.UserAction.ToggleSidebarOn,r)}}function l(e){return function(i,r){void 0===i&&(i=n.DocType.default),e({type:t.Actions.CloseSidebar,payload:{type:i}}),o.logUserAction(n.UserAction.ToggleSidebarOff,r)}}function c(){return{type:t.Actions.DismissAppDownloadInterstitial}}function u(e){return{type:t.Actions.OpenFile,payload:{fileId:e}}}function d(e){return function(t){var n=r.getFileRevisionId(e);t(i.putFile(n,e)),t(u(n))}}Object.defineProperty(t,"__esModule",{value:!0}),t.Actions={OpenFile:"FileViewer/OpenFile",OpenFullScreen:"FileViewer/OpenFullScreen",CloseFullScreen:"FileViewer/CloseFullScreen",OpenSidebar:"FileViewer/OpenSidebar",CloseSidebar:"FileViewer/CloseSidebar",DismissAppDownloadInterstitial:"FileViewer/DismissAppDownloadInterstitial"},t.setFullScreen=a,t.openSidebar=s,t.closeSidebar=l,t.dismissAppDownloadInterstitial=c,t.openFileById=u,t.openFile=d}),define("modules/clean/react/file_viewer/data/legacy_flux_integration",["require","exports","modules/clean/react/file_viewer/data/store","modules/clean/react/file_viewer/data/actions"],function(e,t,n,i){"use strict";function r(e){o.dispatch(i.openFile(e))}Object.defineProperty(t,"__esModule",{value:!0});var o=n.getStoreForFileViewer();t.switchRevision=r}),define("modules/clean/react/file_viewer/data/reducer",["require","exports","tslib","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/constants"],function(e,t,n,i,r){"use strict";function o(e,t){void 0===e&&(e=a);var r=t.payload;switch(t.type){case i.Actions.OpenFile:return n.__assign({},e,{currentFileId:t.payload.fileId});case i.Actions.OpenFullScreen:return n.__assign({},e,{isFullScreen:!0});case i.Actions.CloseFullScreen:return n.__assign({},e,{isFullScreen:!1});case i.Actions.OpenSidebar:return n.__assign({},e,{isSidebarOpen:n.__assign({},e.isSidebarOpen,(o={},o[r.type]=!0,o))});case i.Actions.CloseSidebar:return n.__assign({},e,{isSidebarOpen:n.__assign({},e.isSidebarOpen,(s={},s[r.type]=!1,s))});case i.Actions.DismissAppDownloadInterstitial:return n.__assign({},e,{appDownloadInterstitialDismissed:!0});default:return e}var o,s}Object.defineProperty(t,"__esModule",{value:!0});var a={appDownloadInterstitialDismissed:!1,currentFileId:void 0,isFullScreen:!1,isSidebarOpen:(s={},s[r.DocType.ppt]=!0,s[r.DocType.pdf]=!1,s)};t.fileViewerReducer=o;var s}),define("modules/clean/react/file_viewer/data/selectors",["require","exports","modules/clean/redux/types","modules/clean/redux/selectors","modules/clean/file_store/selectors","external/reselect","external/lodash"],function(e,t,n,i,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){return i.getStateAtNamespace(e,n.FILE_VIEWER_NAMESPACE_KEY)};t.getIsFullScreen=function(e){return s(e).isFullScreen},t.getIsSidebarOpen=function(e){return s(e).isSidebarOpen},t.getAppDownloadInterstitial=function(e){return s(e).appDownloadInterstitialDismissed},t.getCurrentFileId=function(e){return s(e).currentFileId},t.getCurrentFile=o.createSelector(a.nthArg(0),t.getCurrentFileId,r.getFile)}),define("modules/clean/react/file_viewer/data/store",["require","exports","modules/clean/redux/store","modules/clean/redux/types","modules/clean/file_store/reducer","modules/clean/react/file_viewer/data/reducer","modules/clean/react/file_viewer/data/actions","external/lodash"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){var n=e.file,i=t.getStoreForFileViewer();n&&i.dispatch(a.openFile(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForFileViewer=s.once(function(){return n.getStoreAndRegisterReducers((e={},e[i.FILE_NAMESPACE_KEY]=r.fileNamespaceReducer,e[i.FILE_VIEWER_NAMESPACE_KEY]=o.fileViewerReducer,e));var e}),t.hydrateFileViewerNamespace=l}),define("modules/clean/react/file_viewer/file_preview_event_emitter",["require","exports","external/eventemitter3"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filePreviewEventEmitter=new n}),define("modules/clean/react/file_viewer/location_utils",["require","exports","modules/clean/react/file_viewer/constants","modules/clean/history","modules/core/exception"],function(e,t,n,i,r){"use strict";function o(e){return e?e.query.preview:""}function a(e,t){return e?e+"/"+t:"/"+t}function s(e,t){if(e&&!(t<=0))return e.split("/").slice(0,t+1).join("/")}function l(e,t){if(e){if(t<=0)return e;return s(e,e.split("/").length-t-1)}}function c(e){d(u(e))}function u(e){var t=i.get_uri();return e?t.updateQuery(n.SubpathQueryKey,e):t.removeQuery(n.SubpathQueryKey),t}function d(e){i.push_state(e.getPath(),e.getQuery())}function p(e){var t,i=e.query[n.SubpathQueryKey];return t=i instanceof Array?i.length?i[0]:void 0:i,t&&0!==t.indexOf("/")?void r.reportStack("path malformed",{severity:r.SEVERITY.NONCRITICAL,exc_extra:{fileSubpath:t}}):t}Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromLocation=o,t.addToFileSubpath=a,t.truncateFileSubpath=s,t.shortenFileSubpathBy=l,t.updateFileSubpathQuery=c,t.getFileSubpath=p}),define("modules/clean/react/file_viewer/logging",["require","exports","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/constants"],function(e,t,n,i,r){"use strict";function o(e,t,o){void 0===o&&(o={}),null!=n.FilePreviewSession.currentSession&&i.filePreviewEventEmitter.emit(r.EventType.FilePreviewUserAction,n.FilePreviewSession.currentSession,e,t,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.logUserAction=o}),define("modules/clean/react/file_viewer/models",["require","exports","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/previews/constants","modules/clean/uuid","modules/clean/web_timing_logger","modules/constants/file_viewer","modules/core/browser","modules/core/exception","external/lodash"],function(e,t,n,i,r,o,a,s,l,c,u){"use strict";function d(){var e=u.difference(Object.keys(p),u.values(p));return e.push(n.EventType.FilePreviewSessionEnded),e}Object.defineProperty(t,"__esModule",{value:!0});var p={};p[n.EventType.FilePreviewAttemptStarted]=null,p[n.EventType.FilePreviewSupportConfirmed]=n.EventType.FilePreviewAttemptStarted,p[n.EventType.FilePreviewSupportDenied]=n.EventType.FilePreviewAttemptStarted,p[n.EventType.FilePreviewDownloadAttempted]=n.EventType.FilePreviewSupportConfirmed,p[n.EventType.FilePreviewDownloadSucceeded]=n.EventType.FilePreviewDownloadAttempted,p[n.EventType.FilePreviewDownloadFailed]=n.EventType.FilePreviewDownloadAttempted,p[n.EventType.FilePreviewRenderSucceeded]=n.EventType.FilePreviewDownloadSucceeded,p[n.EventType.FilePreviewRenderFailed]=n.EventType.FilePreviewDownloadSucceeded;var _=(function(){function e(e,t){this.id=e||o.v4({allowInsecure:!0}),this.imagesFetched=t||{},this.deviceType=this._deviceTypeString()}return e.prototype._deviceTypeString=function(){return l.is_supported_mobile_browser()?"mobile":l.is_tablet()?"tablet":"desktop"},e.currentSession=null,e})();t.FileViewerSession=_;var f=(function(){function e(e){var t=e.id,n=e.fileViewerSession,i=e.file,r=e.sourceContext,a=e.sourceAction,s=e.isMounted;this.ssrTiming={},this.ssrTimestamps={},c.assert(!!n,"FileViewerSession required"),c.assert(!!i,"File required"),this.id=t||o.v4({allowInsecure:!0}),this.fileViewerSession=n,this.file=i,this.sourceContext=r,this.sourceAction=a,this.previewTimeline={},this.lastEvent=null,this.pagesRendered={},this.zoomScales=[],this.passwordNeeded=!1,this.isMounted=s}return e.prototype.recordEvent=function(e,t){if(void 0===t&&(t={}),!(t instanceof Object))throw new Error("extra param of recordEvent should be an object.");if(!this._isEventInTimeline(e)){if(p.hasOwnProperty(e)&&this.lastEvent!==p[e])return void(s.FILE_VIEWER_LOGGER_ERRORS&&c.reportStack("FilePreviewLogger event called out of order",{tags:["file_preview_logger_bad_event_order"],severity:c.SEVERITY.NONCRITICAL,exc_extra:{event:e,filePreviewSessionId:this.id,fileViewerSessionId:this.fileViewerSession.id,lastEvent:this.lastEvent,previewTimeline:this.previewTimeline,sourceAction:this.sourceAction,sourceContext:this.sourceContext}}));this._addToTimeline(e),i.filePreviewEventEmitter.emit(e,this,t),this.lastEvent=e}},e.prototype.markPrimaryEvent=function(){var e;e=window._timingData&&window._timingData.tti?window._timingData.tti.getTime():l.now(),this.primaryMarkTs||(this.primaryMarkTs=e)},e.prototype.timeToPrimaryMark=function(){return this.timeToMark(this.primaryMarkTs)},e.prototype.logSSREvent=function(e){void 0===this.ssrTimestamps[e]&&(this.ssrTimestamps[e]=l.now())},e.prototype.timeToMark=function(e){if(void 0!==e)switch(this.sourceAction){case r.PreviewSourceAction.Visit:var t=a.start_time();if(void 0!==t)return e-t;return;case r.PreviewSourceAction.Click:var i=this.previewTimeline[n.EventType.FilePreviewAttemptStarted];if(!i)return;var o=i.timestamp;if(void 0===o)return;return e-o}},e.prototype._isEventInTimeline=function(e){return e in this.previewTimeline},e.prototype._addToTimeline=function(e){this.previewTimeline[e]={timestamp:l.now()}},e.currentSession=null,e})();t.FilePreviewSession=f,t.FilePreviewSessionEndEvents=d()}),define("modules/clean/react/icon/old_icons",["require","exports","tslib","external/react","spectrum/icon_content","spectrum/file_icon","modules/clean/react/icon/icon_helper"],function(e,t,n,i,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICON_SIZES=a.ICON_SIZES;var s=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.alt,n=e.className,r=e.filename,s=e.size;return i.createElement(o.FileIcon,{alt:t,className:n,path:r,variant:a.to_spectrum_icon_size(s)})},t.defaultProps={size:a.ICON_SIZES.LARGE},t})(i.PureComponent);t.OldFileIcon=s,t.OldFolderIcon=function(e){var t=e.alt,n=e.className,o=e.size,s=e.isConfidential;return i.createElement(r.IconContent,{alt:t,className:n,name:a.spectrum_folder_icon({size:o,isConfidential:s})})},t.OldFolderIcon.defaultProps={size:a.ICON_SIZES.LARGE}}),define("modules/clean/react/location/types",["require","exports","modules/core/uri"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(){function e(e,t){void 0===t&&(t={});try{this.path=n.URI.decode(e)}catch(t){this.path=e}this.query=t}return e.fromURI=function(t){return new e(t.getPath(),t.getQuery())},e})();t.Location=i}),define("modules/clean/react/location/with_location",["require","exports","tslib","external/react","modules/clean/react/location/types","modules/clean/react/size_class/utils","modules/core/browser","modules/clean/history"],function(e,t,n,i,r,o,a,s){"use strict";function l(e,t){return void 0===t&&(t=c),l=(function(o){function l(e){var n=o.call(this,e)||this;n.onLocationChange=function(e,i){n.setState(t(new r.Location(e,i),n.props))};var i=a.get_uri(),s=i.getPath();return n.basePathComponent="/"+s.split("/")[1],n.state=t(r.Location.fromURI(i),e),n}return n.__extends(l,o),l.prototype.componentDidMount=function(){s.add_callback(this.basePathComponent,this.onLocationChange,!0)},l.prototype.componentWillUnmount=function(){s.remove_callback(this.basePathComponent,this.onLocationChange)},l.prototype.render=function(){return i.createElement(e,n.__assign({},this.props,this.state))},l})(i.PureComponent),l.displayName="WithLocation("+o.getDisplayName(e)+")",l;var l}Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){return{location:e}};t.withLocation=l}),define("modules/clean/react/open_in_app/banner",["require","exports","tslib","external/react","modules/clean/react/css","modules/clean/open_in_app/actions","modules/core/i18n"],function(e,t,n,i,r,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleAppRedirect=function(){n.props.onClick&&n.props.onClick(),o.openInApp(n.props.urls,{onAppNeeded:function(){return n.setState({showInstallAppText:!0})},onAppInstalled:function(){return n.setState({showInstallAppText:!1})}})},n.state={showInstallAppText:!1},n}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){o.cleanUp()},t.prototype.render=function(){return i.createElement("div",{className:"open-in-app-banner-container"},i.createElement("button",{className:"button-as-link open-in-app-banner-text",onClick:this.handleAppRedirect},this.state.showInstallAppText?a._("Get the Dropbox App"):a._("View In App")),i.createElement("button",{className:"button-as-link open-in-app-banner-close","aria-label":"Close",onClick:this.props.onClose}))},t
})(i.Component),l=["/static/css/open_in_app/banner-vflZQkrls.css"],c=r(s,l);t.OpenInAppBanner=c}),define("modules/clean/react/previews/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR"})(t.ErrorType||(t.ErrorType={}));(function(e){e.Browse="browse",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file"})(t.PreviewSourceContext||(t.PreviewSourceContext={}));(function(e){e.Visit="visit",e.Click="click"})(t.PreviewSourceAction||(t.PreviewSourceAction={}));(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={}));(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected"})(t.RivieraConvertResponseType||(t.RivieraConvertResponseType={})),t.HYPERLINK_REGEX_STRING="(?:(?:https?)://)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?",t.EMAIL_REGEX_STRING="[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,63}"}),define("modules/clean/react/size_class/constants",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});(function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"})(t.SizeClass||(t.SizeClass={})),t.MEDIA_SIZE_CLASS_MEDIUM="screen and (min-width: 736px) and (max-width: 1023px)",t.MEDIA_SIZE_CLASS_LARGE="screen and (min-width: 1024px)"}),define("modules/clean/react/size_class/size_class",["require","exports","tslib","external/react","external/classnames","external/hoist-non-react-statics","spectrum/match","modules/clean/react/size_class/constants","modules/clean/react/size_class/utils","modules/clean/react/size_class/utils"],function(e,t,n,i,r,o,a,s,l,c){"use strict";function u(e,t){return void 0===t&&(t={}),o((function(o){function u(){var t=null!==o&&o.apply(this,arguments)||this;return t.displayName="WithSizeClass("+c.getDisplayName(e),t.state={},t.getHandleMatch=function(e,n){return function(){t.setState((i={},i[e]=n,i));var i}},t.onMatchMedium=t.getHandleMatch("matchSizeClassMedium",!0),t.onUnmatchMedium=t.getHandleMatch("matchSizeClassMedium",!1),t.onMatchLarge=t.getHandleMatch("matchSizeClassLarge",!0),t.onUnmatchLarge=t.getHandleMatch("matchSizeClassLarge",!1),t}return n.__extends(u,o),u.prototype.render=function(){var o=t.isResponsiveEnabled,c=t.responsiveClassName,u=void 0===c?"":c;return i.createElement("div",{className:r((d={},d[u]=!o||o(),d))},i.createElement(a.Match,{media:s.MEDIA_SIZE_CLASS_MEDIUM,onMatch:this.onMatchMedium,onUnmatch:this.onUnmatchMedium}),i.createElement(a.Match,{media:s.MEDIA_SIZE_CLASS_LARGE,onMatch:this.onMatchLarge,onUnmatch:this.onUnmatchLarge}),i.createElement(e,n.__assign({},this.props,{sizeClass:l.getSizeClass(this.state.matchSizeClassMedium,this.state.matchSizeClassLarge,o)})));var d},u})(i.Component),e)}Object.defineProperty(t,"__esModule",{value:!0}),t.withSizeClass=u}),define("modules/clean/react/size_class/utils",["require","exports","modules/clean/react/size_class/constants"],function(e,t,n){"use strict";function i(e,t,i){return i&&!i()?n.SizeClass.Large:t?n.SizeClass.Large:e?n.SizeClass.Medium:n.SizeClass.Small}function r(e){return e.displayName||e.name||"Component"}Object.defineProperty(t,"__esModule",{value:!0}),t.getSizeClass=i,t.getDisplayName=r}),define("modules/clean/react/thumbnail",["require","exports","tslib","external/classnames","external/react","modules/clean/photos/batching_thumb_store","modules/clean/react/icon/old_icons","modules/constants/python","modules/core/uri","modules/clean/file_store/utils"],function(e,t,n,i,r,o,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=o(),d=(function(e){function t(t){var n=e.call(this,t)||this;return n.handleImageError=function(){n.setState({src:null})},n.state=n.getStateForTemplateUrl(n.props.file.thumbnail_url_tmpl),n}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.bindThumbStore()},t.prototype.componentWillReceiveProps=function(e){var t=e.file.thumbnail_url_tmpl;t!==this.props.file.thumbnail_url_tmpl&&this.setState(this.getStateForTemplateUrl(t))},t.prototype.componentWillUpdate=function(){this.unbindThumbStore()},t.prototype.componentDidUpdate=function(){this.bindThumbStore()},t.prototype.componentWillUnmount=function(){this.unbindThumbStore()},t.prototype.bindThumbStore=function(){var e=this;if(this.state.isLoading&&!this.bindingId){var t=this.state.url;t&&(this.bindingId=u.bind_url(t,{onSuccess:function(){e.setState({isLoading:!1,src:u.get_thumb(t)})},onError:function(){e.setState({isLoading:!1})}}))}},t.prototype.unbindThumbStore=function(){this.bindingId&&(u.unbind_url(this.bindingId),delete this.bindingId)},t.prototype.getStateForTemplateUrl=function(e){var n=null;if(!e)return{isLoading:!1,src:null};var i=t.getThumbnailUrl(e);return i&&(n=u.get_thumb(i)),{isLoading:!!i&&!n,src:n,url:i}},t.getThumbnailUrl=function(e){if(e){var t=l.URI.parse(e);return t.updateQuery("size","178x178"),t.updateQuery("size_mode",s.THUMBNAIL_SIZE_MODE.EXACT.toString()),t.toString()}},t.prototype.render=function(){var e,t=this.props,n=t.alt,o=t.file,s=t.iconSize,l=t.className,u=this.state.src;return u?(e=["icon","thumbnail-image--loaded",l],r.createElement("img",{alt:n,className:i(e),src:u,onError:this.handleImageError})):(e=["icon","thumbnail-image--failed",l],r.createElement(a.OldFileIcon,{alt:n,className:i(e),filename:c.getFilename(o),size:s}))},t.displayName="ThumbnailIcon",t})(r.Component);t.ThumbnailIcon=d}),define("modules/clean/uuid",["require","exports","modules/clean/crypto"],function(e,t,n){"use strict";function i(e){void 0===e&&(e={});var t=c({allowInsecure:e.allowInsecure});return t[6]=15&t[6]|64,t[8]=63&t[8]|128,l(t)}Object.defineProperty(t,"__esModule",{value:!0});var r,o=(function(){var e,t=[];for(e=0,r=e;e<=255;e++,r=e)t.push((r+256).toString(16).substr(1));return t})(),a=function(e){return Array.from(e).map(function(e){return o[e]}).join("")},s=function(e){return 255&e},l=function(e){var e,t=[e.slice(0,4),e.slice(4,6),e.slice(6,8),e.slice(8,10),e.slice(10,16)];return(function(){for(var n=[],i=0,r=Array.from(t);i<r.length;i++)e=r[i],n.push(a(e));return n})().join("-")},c=function(e){void 0===e&&(e={});var t=new Array(16);try{n.getRandomValues(t)}catch(n){if(!n.message.match(/generator isn't seeded/)||!e.allowInsecure)throw n;u(t)}return Array.from(t).map(function(e){return s(e)})},u=function(e){var t,n,i=Math.pow(2,8);for(r=0,n=e.length,t=0<=n;t?r<n:r>n;t?r++:r--)e[r]=Math.floor(Math.random()*i);return e};t.v4=i});
//# sourceMappingURL=pkg-shared_link_core.min.js-vfl6IKEFM.map